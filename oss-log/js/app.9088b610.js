(function(t){function e(e){for(var n,u,o=e[0],l=e[1],s=e[2],d=0,f=[];d<o.length;d++)u=o[d],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&f.push(a[u][0]),a[u]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=u(u.s=r[0]))}return t}var n={},a={app:0},i=[];function u(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=t,u.c=n,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(r,n,function(e){return t[e]}.bind(null,n));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var c=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"4daf":function(t,e,r){var n={"./provider.vue":"d2db"};function a(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="4daf"},"56d7":function(t,e,r){"use strict";r.r(e);r("4de4"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=(r("0fae"),r("5c96")),i=r.n(a),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("RouterView")],1)},o=[],l=(r("ac1f"),r("5319"),{created:function(){this.$route.query.page||this.$router.replace({query:{page:"user"}})}}),s=l,c=(r("5c0b"),r("2877")),d=Object(c["a"])(s,u,o,!1,null,null,null),f=d.exports,p=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"index"},[r("Daily"),r("ElTabs",{attrs:{value:String(t.$route.params.page)},on:{"tab-click":t.handleTabClick}},[r("ElTabPane",{attrs:{label:"用户列表",name:"user"}},[r("UserList")],1),r("ElTabPane",{attrs:{label:"用户详情数据",name:"user_info"}},[r("UserInfo")],1),r("ElTabPane",{attrs:{label:"线上故障日志",name:"crash"}},[r("Crash")],1)],1)],1)},m=[],b=(r("b0c0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ElTable",{staticStyle:{width:"100%"},attrs:{data:t.dailyList,stripe:"",size:"mini"}},[r("ElTableColumn",{attrs:{prop:"date",label:"日期",width:"180"}}),r("ElTableColumn",{attrs:{prop:"count",label:"活跃用户数",width:"220"}})],1)}),v=[],y=(r("d81d"),r("d3b7"),r("3ca3"),r("ddb0"),r("53ca")),g=(r("96cf"),r("1da1")),_=1e3,w=60*_,O=60*w,S=24*O,k=(r("25f0"),r("eebb")),x=r.n(k),E=new x.a({region:"oss-cn-hangzhou",accessKeyId:"LTAI4Fp34XZz4JocDhXdmXn9",accessKeySecret:"GxC3UJIFNZg38IDZ3IG2D13Ip4YMqv",bucket:"registration-apply"});function C(t){return D.apply(this,arguments)}function D(){return D=Object(g["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.get(e);case 3:return r=t.sent,t.abrupt("return",JSON.parse(r.content.toString()));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0?t.t0.code:"unknown error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),D.apply(this,arguments)}r("cb29"),r("caad"),r("13d5"),r("b680"),r("b64b"),r("2532");function T(t,e){var r=e-t+1;return Array(Math.max(r,0)).fill(0).map((function(e,r){return r+t}))}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!t)return"null";var r=t;"number"===typeof r&&(String(t).length<10?r=(new Date).getTime():10===String(t).length&&(r=1e3*t));var n=new Date(r),a={M:n.getMonth()+1,d:n.getDate(),h:n.getHours(),m:n.getMinutes(),s:n.getSeconds(),q:Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};return e.replace(/(y+|M+|d+|h+|m+|s+|q+|S+)/g,(function(t,e){e=e.length>1?e[0]:e;var r=a[e];return void 0!==r?(t.length>1&&(r="0".concat(r),r=r.substr(r.length-2)),r):"y"===e?String(n.getFullYear()).substr(4-t.length):t}))}var P={name:"Daily",props:{},data:function(){return{dailyList:[]}},created:function(){},methods:{calcUserTableActiveUser:function(t){var e=t.date,r=t.result;if(!r||!Array.isArray(r.data))return 0;var n=new Date(e).getTime(),a=n+S;return r.data.filter((function(t){return t.start>=n&&t.start<=a})).length},calcDailyActiveUser:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(T(0,7).map((function(e){return t.getDateData(e)})));case 2:r=e.sent,t.dailyList=r.map((function(e){return{date:e.date.replace(/\d+\//,""),count:t.calcUserTableActiveUser(e)}})).reverse();case 4:case"end":return e.stop()}}),e)})))()},getDateData:function(t){return Object(g["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new Date(Date.now()-S*t).toLocaleDateString(),n="user-date/".concat(r),e.next=4,C(n);case 4:if(a=e.sent,"object"!==Object(y["a"])(a)){e.next=7;break}return e.abrupt("return",{date:r,result:a});case 7:return e.abrupt("return",{date:r,result:null});case 8:case"end":return e.stop()}}),e)})))()}}},z=P,L=Object(c["a"])(z,b,v,!1,null,null,null),I=L.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-list"},[r("Provider",{attrs:{url:"/api/user",query:{order:"start:desc"},"data-resolve":t.resolveData},scopedSlots:t._u([{key:"header",fn:function(e){var n=e.list;return[r("ElAlert",{attrs:{type:"success"}},[t._v(" 历史总用户："+t._s(n.length)+"个， "),r("ElInputNumber",{staticStyle:{width:"90px","margin-right":"4px"},attrs:{size:"mini","controls-position":"right",min:1,max:100,label:"描述文字"},model:{value:t.filterDay,callback:function(e){t.filterDay=e},expression:"filterDay"}}),t._v(" 天未使用的用户"+t._s(t.getNoActiveUserList(n).length)+"个 ")],1)]}},{key:"default",fn:function(e){var n=e.list;return r("ElTable",{staticStyle:{width:"100%"},attrs:{data:n,stripe:"","default-sort":{prop:"start",order:"descending"}}},[r("ElTableColumn",{attrs:{prop:"name",label:"用户名",width:"180"}}),r("ElTableColumn",{attrs:{prop:"start",label:"操作时间",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[r("ElTag",{attrs:{type:"warning"}},[t._v(t._s(t._f("date")(n.start,"MM-dd hh:mm:ss")))])],1)}}],null,!0)}),r("ElTableColumn",{attrs:{prop:"duration",label:"耗时",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[t._v(t._s(t._f("duration")(n.duration)))])}}],null,!0)}),r("ElTableColumn",{attrs:{prop:"count",label:"操作次数",width:"100",sortable:""}}),r("ElTableColumn",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("ElButton",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.toDetail(n)}}},[t._v("用户操作记录")])}}],null,!0)})],1)}}])})],1)},$=[],A=r("5530"),M=r("6b6c"),q={ju:"聚划算",tbc:"淘宝",tmc:"天猫"},N={sync:"采集",submitSelect:"选品",submitInfo:"预报名",submitDetail:"完善详情"};function F(t){return t.map((function(t){return Object(A["a"])({},t,{scene:q[t.scene],type:N[t.type],duration:t.end-t.start})}))}var R={name:"UserList",data:function(){return{filterDay:30,lastUserUpdateTime:Date.now()}},methods:{resolveData:function(t){return Object(A["a"])({},t,{data:F(t.data)})},getNoActiveUserList:function(t){var e=this;console.log("getNoActiveUserList",{list:t});var r=Date.now();return t.filter((function(t){return r-t.start>e.filterDay*S}))},toDetail:function(t){this.$router.push({path:this.$route.path,query:{page:"user_info",user:t.name}})}}},Q=R,H=Object(c["a"])(Q,U,$,!1,null,"93dc7098",null),B=H.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-info"},[r("ElInput",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入活动名","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$refs.provider.getList()}},model:{value:t.currentActivityName,callback:function(e){t.currentActivityName=e},expression:"currentActivityName"}}),r("ElInput",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$refs.provider.getList()}},model:{value:t.currentUser,callback:function(e){t.currentUser=e},expression:"currentUser"}}),r("Provider",{ref:"provider",attrs:{url:"/api/user_info","data-resolve":t.resolveData,query:{where:(t.currentUser?[["name","like","%"+t.currentUser+"%"]]:[]).concat(t.currentActivityName?[["activity_name","like","%"+t.currentActivityName+"%"]]:[]),order:"start:desc"}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.list;return r("ElTable",{staticStyle:{width:"100%"},attrs:{data:n,stripe:"","default-sort":{prop:"start",order:"descending"}}},[r("ElTableColumn",{attrs:{prop:"name",label:"用户名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[r("p",[t._v(t._s(n.name))]),r("p",{staticClass:"desc"},[t._v(t._s(n.activity_name))])])}}],null,!0)}),r("ElTableColumn",{attrs:{prop:"activity_id",label:"活动ID",width:"120"}}),r("ElTableColumn",{attrs:{prop:"scene",label:"场景",width:"90",filters:t.filterOptions.scene,"filter-method":t.userInfoFilterHandler}}),r("ElTableColumn",{attrs:{prop:"type",label:"操作类型",width:"120",filters:t.filterOptions.type,"filter-method":t.userInfoFilterHandler}}),r("ElTableColumn",{attrs:{prop:"start",label:"操作时间",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[r("ElTag",{attrs:{type:"warning"}},[t._v(t._s(t._f("date")(n.start,"MM-dd hh:mm:ss")))])],1)}}],null,!0)}),r("ElTableColumn",{attrs:{prop:"duration",label:"耗时",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[t._v(t._s(t._f("duration")(n.duration)))])}}],null,!0)}),r("ElTableColumn",{attrs:{prop:"success",label:"成功数",width:"200",sortable:""}}),r("ElTableColumn",{attrs:{prop:"error",label:"失败数",width:"100",sortable:""}}),r("ElTableColumn",{attrs:{label:"提交数据"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("ElButton",{attrs:{plain:"",type:"success",size:"mini"},on:{click:function(e){return t.toSubmitDetail(n.submit_items_id)}}},[t._v(" "+t._s("采集"===n.type?"采集":"提交")+"数据 ")])}}],null,!0)}),r("ElTableColumn",{attrs:{label:"失败数据"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("ElButton",{attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(e){return t.toSubmitDetail(n.error_items_id)}}},[t._v(" 失败数据 ")])}}],null,!0)}),r("ElTableColumn",{attrs:{label:"接口数据"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("ElButton",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(e){return t.toSubmitDetail(n.request_id)}}},[t._v(" 接口数据 ")])}}],null,!0)})],1)}}])})],1)},K=[],X={scene:[{text:"聚划算",value:"聚划算"},{text:"淘宝",value:"淘宝"},{text:"天猫",value:"天猫"}],type:[{text:"采集",value:"采集"},{text:"选品",value:"选品"},{text:"预报名",value:"预报名"},{text:"完善详情",value:"完善详情"}]},Z={name:"UserInfo",props:{},data:function(){return{currentUser:this.$route.query.user,currentActivityName:this.$route.query.activityName,filterOptions:X}},created:function(){Object(M["a"])("/api/items_log",{username:"敦奴官方outlets店",page_size:1e3})},methods:{resolveData:function(t){return Object(A["a"])({},t,{data:F(t.data)})},toSubmitDetail:function(t){window.open("https://registration-apply.oss-cn-hangzhou.aliyuncs.com/user-detail/".concat(t))},userInfoFilterHandler:function(t,e,r){return e[r.property]===t}}},G=Z,Y=Object(c["a"])(G,J,K,!1,null,"40673789",null),V=Y.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Provider",{attrs:{url:"/api/crash_log","data-resolve":t.resolveData},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.list;return r("ElTable",{staticStyle:{width:"100%"},attrs:{data:n,stripe:"","default-sort":{prop:"time",order:"descending"}}},[r("ElTableColumn",{attrs:{prop:"name",label:"用户名",width:"150"}}),r("ElTableColumn",{attrs:{prop:"scene",label:"场景",width:"80",filters:t.filterOptions.scene,"filter-method":t.userInfoFilterHandler}}),r("ElTableColumn",{attrs:{prop:"type",label:"操作类型",width:"100",filters:t.filterOptions.type,"filter-method":t.userInfoFilterHandler}}),r("ElTableColumn",{attrs:{prop:"time",label:"时间",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("div",{},[t._v(t._s(t._f("date")(n.time)))])}}],null,!0)}),r("ElTableColumn",{attrs:{label:"错误信息",width:"900",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return r("pre",{staticStyle:{"font-size":"12px",overflow:"auto",color:"#777777"}},[t._v(t._s(n.error))])}}],null,!0)})],1)}}])})},tt=[],et={name:"Crash",data:function(){return{currentCrashData:[],filterOptions:X}},methods:{resolveData:function(t){return Object(A["a"])({},t,{data:F(t.data)})},userInfoFilterHandler:function(t,e,r){return e[r.property]===t}}},rt=et,nt=Object(c["a"])(rt,W,tt,!1,null,"62d054b9",null),at=nt.exports,it={name:"Index",components:{Daily:I,UserList:B,UserInfo:V,Crash:at},data:function(){return{}},watch:{$route:{deep:!0,handler:function(){this.$route.params.page||this.$router.push({path:"/index/user"})}}},methods:{handleTabClick:function(t){this.$router.push({path:"/index/".concat(t.name)})}}},ut=it,ot=Object(c["a"])(ut,h,m,!1,null,"10e2f884",null),lt=ot.exports;n["default"].use(p["a"]);var st=[{path:"/",redirect:"/index"},{path:"/index/:page",component:lt}],ct=new p["a"]({routes:st});ct.beforeEach((function(t,e,r){"/index"!==t.path||t.params.page?r():r({path:"/index/user"})}));var dt=ct,ft=r("2f62");n["default"].use(ft["a"]);var pt=new ft["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ht=(r("4160"),r("159b"),r("4daf")),mt={install:function(){ht.keys().forEach((function(t){var e=ht(t).default;n["default"].component(e.name,e)}))}};n["default"].config.productionTip=!1,n["default"].use(i.a),n["default"].use(mt),n["default"].filter("date",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd hh:mm:ss";return j(t,e)})),n["default"].filter("duration",(function(t){return Math.round(t/_)+"秒"})),new n["default"]({router:dt,store:pt,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"6b6c":function(t,e,r){"use strict";r("d3b7");var n=r("5530"),a=r("7338"),i=r.n(a),u="https://1951670195049617.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/registration/database";function o(t){var e=t.url,r=t.method,a=void 0===r?"get":r,u=t.params,o=void 0===u?{}:u,l=t.data,s=void 0===l?{}:l,c=t.options,d=void 0===c?{}:c;return new Promise((function(t,r){i()(Object(n["a"])({url:e,method:a,params:o,data:s},d)).then((function(e){t(e.data)})).catch((function(t){r(t)}))}))}function l(t,e,r){return o.call(this,{url:t,method:"get",params:e,options:r})}r.d(e,"a",(function(){return s})),i.a.defaults.baseURL=u,i.a.defaults.headers={Accept:"application/json","Content-Type":"application/json; charset=utf-8"},i.a.defaults.timeout=1e4,i.a.defaults.retry=1,i.a.defaults.retryDelay=1e3;var s=l},"9c0c":function(t,e,r){},d2db:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"provider"},[t._t("header",null,{list:t.useData.data}),t.topPagination?r("ElPagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizeOptions,"page-size":t.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e(),r("div",[t._t("default",null,{list:t.useData.data})],2),r("ElPagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizeOptions,"page-size":t.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)},a=[],i=(r("a623"),r("7db0"),r("4160"),r("d81d"),r("13d5"),r("a9e3"),r("8ba4"),r("b64b"),r("ac1f"),r("5319"),r("841c"),r("159b"),r("96cf"),r("1da1")),u=r("5530"),o=r("6b6c");r("fb6a"),r("d3b7"),r("25f0");function l(t,e){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===e}function s(t){return l(t,"object")}function c(t){return l(t,"string")}function d(t){return Array.isArray(t)}function f(t,e){return t.every((function(t,r){return h(t,e[r])}))}function p(t,e){var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var a=0,i=r;a<i.length;a++){var u=i[a];if(!h(t[u],e[u]))return!1}return!0}function h(t,e){return s(t)&&s(e)?p(t,e):d(t)&&d(e)?f(t,e):t===e}var m=function(t){if(!t.key)return!1;var e=t.current;return!(!e||void 0===e.label||void 0===e.value)&&(Array.isArray(t.list)&&t.list.every((function(t){return void 0!==t.label&&void 0!==t.value})))},b={name:"Provider",props:{url:{type:String,default:""},defaultData:{type:Object,default:function(){return{data:[],page:1,page_size:20,total_count:0}}},filterOptions:{type:Array,default:function(){return[]}},topPagination:{type:Boolean,default:!0},query:{type:Object,default:function(){return{}}},search:{type:Object,default:function(){return{}}},pageSizeOptions:{type:Array,default:function(){return[20,50,100,200,300]}},page:{type:Number,default:1,validate:function(t){return Number.isInteger(t)&&t>0}},pageSize:{type:Number,default:20,validate:function(t){return Number.isInteger(t)&&t>0}},dataResolve:{type:Function,default:function(){return function(t){return t}}}},data:function(){return{commonFilterOptions:[],currentPage:this.page,currentPageSize:this.pageSize,data:null,defaultSearchOption:{key:"q",type:"multiple",multiple:!0,multiplePlaceholder:"输入",multipleSeparator:",，\n",placeholder:"关键词、宝贝ID（宝贝链接）",onSubmit:function(){}},initQuery:{},currentSearchText:"",filterOptionsList:[],totalCount:0,isLoading:!0,cacheSelectionList:[]}},computed:{useData:function(){return this.data||this.defaultData},hasConfigSearch:function(){return Object.keys(this.search).length>0},searchOption:function(){return Object(u["a"])({},this.defaultSearchOption,{},this.search)},filterOptionsQueryParams:function(){return this.filterOptionsList.reduce((function(t,e){return t[e.key]=e.current.value,t}),{})},queryParams:function(){return Object(u["a"])({},this.filterOptionsQueryParams,{page:this.currentPage,page_size:this.currentPageSize},this.query)}},watch:{filterOptions:{immediate:!0,handler:function(){this.updateFilterOptionsList()}},commonFilterOptions:{deep:!0,handler:function(){this.updateFilterOptionsList()}},query:{handler:function(t,e){h(t,e)||(this.currentPage=1,this.getList())},deep:!0},pageSize:function(t){this.currentPageSize=t}},created:function(){this.initUrlQuery(),this.getList()},methods:{handleSizeChange:function(t){this.currentPageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},updateFilterOptionsList:function(){var t=this;this.filterOptionsList=this.filterOptions.map((function(e){return c(e)?t.mapFilterKeyItem(e):m(e)?e:(window.console.error("filter option is not legal array",e),{})}))},initUrlQuery:function(){var t=this,e=this.$route.query;Object.keys(e).forEach((function(r){var n=e[r],a=t.filterOptions.find((function(t){return t.key===r}));if(a){var i=a.list.find((function(t){return t.value==n}));i&&(a.current=i)}else if("page"!==r)if("page_size"!==r)t.initQuery[r]=n;else{var u=parseInt(n,10);Number.isInteger(u)&&u>0&&(t.currentPageSize=u)}else{var o=parseInt(n,10);Number.isInteger(o)&&o>0&&(t.currentPage=o)}}))},mapFilterKeyItem:function(t){var e=this.filterOptionsList.find((function(e){return e.key===t})),r=this.commonFilterOptions[t];return e?(e.list=r,e):{key:t,current:r[0]||{},list:r}},updateUrlQuery:function(){this.$router.replace({path:this.$route.path,query:this.queryParams})},optionChange:function(t){var e=t.filterOption,r=t.option;e.current=r,this.currentPage=1,this.getList()},onSubmit:function(t){this.currentSearchText=t.replace(/[\n]/g,","),this.searchOption.onSubmit(),this.currentPage=1,this.getList()},getList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("before-update",t.queryParams,t),t.updateUrlQuery(),t.isLoading=!0,Object(o["a"])(t.url,t.queryParams).then((function(e){var r=e.total_count;t.isLoading=!1,t.totalCount=r,t.data=t.dataResolve(e),t.$emit("update",e,t)})).catch((function(){t.isLoading=!1}));case 4:case"end":return e.stop()}}),e)})))()}}},v=b,y=r("2877"),g=Object(y["a"])(v,n,a,!1,null,"7cea48d5",null);e["default"]=g.exports},eebb:function(t,e){t.exports=OSS}});
//# sourceMappingURL=app.9088b610.js.map